### Vue构造函数

我们看一下代码

```
// Vue构造函数
function Vue (options) {
  // Vue只能作为构造函数调用
  // 当以构造函数调用Vue时，此时this应指向Vue的实例
  if (process.env.NODE_ENV !== 'production' &&
    !(this instanceof Vue)
  ) {
    warn('Vue is a constructor and should be called with the `new` keyword')
  }
  // 调用Vue.prototype._init
  this._init(options)
}

initMixin(Vue)
stateMixin(Vue)
eventsMixin(Vue)
lifecycleMixin(Vue)
renderMixin(Vue)
```

是不是觉得Vue构造函数代码简洁的好可怕？

实际上，Vue的所有逻辑都是根据不同功能将代码拆成一些单独的函数进行执行，让主线逻辑一目了然，也能充分利用模块化思想，将各个细化的功能在各个模块中独自实现，减少代码耦合，方便开发和代码维护。

这个特点体现在这里构造函数下面调用的五个方法。

#### 属性方法扩展

我们知道Vue除了支持组件化开发以及完善的响应式系统外，还提供了丰富的API，不管是静态还是原型方法，它们都足以满足咱们日常的一些开发。

这五个方法的调用，在不同场景上定义了Vue原型上的属性的方法，我们简单介绍一下。

```
// 定义Vue原型上的init方法，就是构造函数中的_init方法
initMixin(Vue)
// 定义原型上和数据相关的属性方法
stateMixin(Vue)
// 定义原型上跟事件相关的属性方法
eventsMixin(Vue)
// 定义原型上跟生命周期相关的属性方法
lifecycleMixin(Vue)
// 定义渲染相关的函数
renderMixin(Vue)
```

这里就不细讲，接下来咱们一个个拉出来看看都做了什么。

Vue的故事大门就此从这里展开。
